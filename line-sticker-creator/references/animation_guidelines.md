# アニメーションスタンプ制作ガイドライン

## APNG 制作の基本

### フレーム設計

| 項目 | 推奨値 | LINE制限 |
|:---|:---|:---|
| フレーム数 | 8-15 | 5-20 |
| FPS | 10-15 | - |
| ループ回数 | 1-2 | 1-4 |
| 総再生時間 | 1-3秒 | 4秒以内 |

### FPS と フレーム数の組み合わせ

| FPS | 1ループのフレーム数上限 | 2ループ | 4ループ |
|:---|:---|:---|:---|
| 10 | 20 (2.0秒) | 20 (4.0秒) | 10 (4.0秒) |
| 15 | 20 (1.3秒) | 20 (2.7秒) | 15 (4.0秒) |
| 20 | 20 (1.0秒) | 20 (2.0秒) | 20 (4.0秒) |

## アニメーション手法

AI画像生成でアニメーションスタンプを作る場合、以下の手法で各フレームを生成する。

### 手法 1: ポーズ変化（推奨）

同一キャラクターの異なるポーズを連番で生成し、つなげる。

```
フレーム構成例（手を振るアニメーション、8フレーム）:
01: 右手を下に構える
02: 右手を斜め下
03: 右手を横に伸ばす
04: 右手を斜め上
05: 右手を上に
06: 右手を斜め上（戻り）
07: 右手を横に伸ばす（戻り）
08: 右手を斜め下（戻り）
```

### 手法 2: 表情変化

同一ポーズで表情のみを変化させる。

```
フレーム構成例（びっくりリアクション、6フレーム）:
01-02: 通常表情
03: 目を見開く
04-05: 完全に驚いた表情（大きな目、開いた口）
06: やや収まった驚き表情
```

### 手法 3: エフェクト追加

キャラクターは静止のまま、周囲のエフェクト（ハート、星、汗など）を変化させる。

```
フレーム構成例（ハートが飛ぶ、10フレーム）:
01-02: キャラクター単体
03: 小さなハート1つ出現
04-05: ハートが2-3個に増加
06-07: ハートが大きく広がる
08-09: ハートが上に飛んでいく
10: キャラクター単体に戻る
```

## APNG 作成コマンド

```bash
# 基本: 10fps, 1ループ
uv run --with pillow scripts/create_apng.py frames/ -o sticker.png

# カスタム: 15fps, 2ループ
uv run --with pillow scripts/create_apng.py frames/ -o sticker.png --fps 15 --loops 2
```

## 第1フレームの重要性

APNG の第1フレームは LINE STORE で静止画として表示される。

- 第1フレームにキャラクターが最も魅力的に見えるポーズを配置する
- 「何のアニメーションか」が第1フレームだけで伝わるようにする
- 空白や中間ポーズを第1フレームにしない

## ファイルサイズ最適化

APNG の 1MB 制限を守るための対策:

1. **フレーム数を抑える**: 必要最小限のフレーム（5-10フレーム）
2. **色数を減らす**: シンプルな配色（フラットデザイン推奨）
3. **画像サイズ**: 320x270 より小さくする（例: 270x270）
4. **共通部分の活用**: APNG は同一ピクセルを圧縮するため、背景が透過で変化部分が少ないほどサイズが小さくなる
